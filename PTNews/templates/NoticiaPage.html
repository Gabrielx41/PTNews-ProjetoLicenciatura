{% extends "index.html" %}

{% block head %}
    <link rel="stylesheet" type="text/css" href="../static/css/NoticiaPage.css" />
{% endblock %}

{% block content %}
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="../static/js/FuncPesquisa.js"></script>
    <script src="../static/js/DownloadImage.js"></script>
    <script src="../static/js/NoticiaJS.js"></script>
    <script src="../static/js/cima.js"></script>
    <script src="../static/js/GetNomes.js"></script>

    {% if noticia %}
        <div class="noticia-container">
            <h1 class="titulo">{{ noticia.title }}</h1>
            <p class="lead">{{ noticia.lead if noticia.lead and noticia.lead != '.'}}</p>

            <div class="meta-info">
                <div class="source-info">
                    <img src="../static/images/sources/{{ noticia.source }}.png" alt="Logo do jornal" class="img-logo-source">
                    <p class="source">{{ noticia.source }}</p>
                </div>
                <div class="data">
                    <span>{{ noticia.published }}</span>
                </div>
            </div>

            <div class="content">
                {% if noticia.images and noticia.images[0].url %}
                    <img src="{{ noticia.images[0].url }}" alt="Imagem da Notícia" class="imagem-noticia" title="Duplo click para fazer download">
                {% else %}
                    <img src="../static/images/sources/{{ noticia.source }}.png" alt="Imagem do Jornal" class="imagem-noticia">
                {% endif %}
                <div id="content">
                    {{ contentInicio|safe }}{% if noticia.content|length > 0 %}<a id="reticencias">...</a><span id="more-content" style="display: none;">{{ noticia.content|safe }}</span><br><a href="javascript:void(0);" id="toggle-content" style="float:right">Ler mais</a>{% endif %}
                </div>
            </div>
          <div>
            <hr> 
                <div>
                    <div id="keywords">
                        {% if noticia.keywords %}
                            <strong>Palavras-chave:</strong>
                            {% for keyword in noticia.keywords %}
                                <span>{{ keyword }}</span>{% if not loop.last %} {% endif %}
                            {% endfor %}
                        {% endif %}
                    </div>
                        <div class="entities">
                            {% if noticia.entities %}
                                <strong>Entidades:</strong>
                                <ul class="horizontal-list">
                                    {% if noticia.entities.LOC %}
                                        <li>
                                            <strong>
                                                <img src="../static/images/mapa.png" alt="Icon Localizações" class="icon-entidades">
                                            </strong> 
                                            {% for entity in noticia.entities.LOC %}
                                                <span>{{ entity }}</span>{% if not loop.last %}, {% endif %}
                                            {% endfor %}
                                        </li>
                                    {% endif %}
                                    {% if noticia.entities.ORG %}
                                        <li>
                                            <strong>
                                                <img src="../static/images/organizações.png" alt="Icon Organizações" class="icon-entidades">
                                            </strong> 
                                            {% for entity in noticia.entities.ORG %}
                                                <span>{{ entity }}</span>{% if not loop.last %}, {% endif %}
                                            {% endfor %}
                                    {% endif %}
                                    {% if noticia.entities.PER %}
                                        <li>
                                            <strong>
                                                <img src="../static/images/pessoas.png" alt="Icon Pessoas" class="icon-entidades">
                                            </strong> 
                                            {% for entity in noticia.entities.PER %}
                                                <span>{{ entity }}</span>{% if not loop.last %}, {% endif %}
                                            {% endfor %}
                                    {% endif %}
                                </ul>
                            {% endif %}
                        </div>         
            </div>
            
            <div class="autor">
                {% if noticia.authors %}
                    <strong>Autor:</strong>
                    <div class="autor-info">
                    {% if noticia.authors[0].image %}
                        <img src="{{ noticia.authors[0].image }}" alt="Imagem do autor" class="autor-imagem">
                    {% endif %}
                        <span class="autor-nome">{{ noticia.authors[0].name }}</span>
                    </div>
                {% endif %}
            </div>

            {% if noticia.entities.LOC %}
            <div class="geolocalizacao">
                <strong>Geolocalização:</strong>
                    <div id="mapa">
                    </div>
            </div>
            {% endif %}    
            
            <p class="link_noticia_container"><a href="{{ noticia.url }}" target="_blank" class="link_noticia">Leia a notícia original</a></p>
        
        </div>
    {% endif %}
{% endblock %}